## 추상 클래스란?

추상 클래스는 객체의 명세의 역할을 하며, 실체 클래스의 공통적인 상태를 모아 규격을 잡아 놓은 추상적인 클래스다.

예를 들어 여러 모델의 TV 클래스를 생성한다고 했을 때, TV의 설계도는 거의 동일하니 어느 정도 틀을 갖춘 상태에서 진행하는 것이 좋다. 이때 사용할 수 있는 것이 **추상 클래스**이다.

```java
public abstract class 클래스명 { 
		
		int a;		

		abstract 타입 메소드명(); 
		타입 메소드명();
}
```

### 추상 클래스 특징

- 추상 클래스는 `abstract` 키워드를 붙여서 표현한다.
- 추상 클래스로 생성하면 `new` 키워드를 통해 객체를 직접 생성할 수 없다.
- 추상 메소드는 인터페이스의 메소드와 같이 구현부가 없다.
- 추상 메소드는 서브 클래스에서 반드시 구현해야 한다.
- 일반 클래스와 동일하게 상태(멤버 변수, 일반 메소드)와 생성자를 가질 수 있다.
- 접근 제어자를 자유롭게 사용할 수 있다.
- **상속하는 집합 간에 연관 관계가 있다(is-a 관계).**
- **다중 상속이 불가능하다.**

## 인터페이스란?

인터페이스는 구현된 것은 아무 것도 없고, 밑그림만 그려져 있는 객체의 명세 혹은 설계도라고 표현할 수 있다.

```java
public interface 인터페이스명 { 
		//상수 타입 
		상수명 = 값; 

		//추상 메소드 
		타입 메소드명(매개변수, ...); 

		//디폴트 메소드 
		default 타입 메소드명(매개변수, ...) { ... } 

		//정적 메소드
		 static 타입 메소드명(매개변수) { ... } 
}

```

### 인터페이스의 특징

- 모든 멤버 변수는 `public static final` 이어야 하며, 이를 생략할 수 있다.
- 모든 메소드는 `public abstract` 이어야 하며, 이를 생략할 수 있다.
- Java 8 부터는 static, default method를 사용할 수 있다.
- 추상 클래스처럼 불완전한 것이기 때문에 그 자체만으로 사용되기 보다, 다른 클래스를 작성하는데 도움을 줄 목적으로 작성된다.
- **상속하는 집합간에는 연관관계가 존재하지 않을 수 있다(has-a 관계).**
- **다중 상속이 가능하다.**

### 인터페이스의 메소드

**default 메소드**

기본 메소드는 자바 8에서 추가된 인터페이스의 새로운 멤버이다. 형태는 클래스의 인스턴스 메소드와 동일한데, default 키워드가 리턴 타입 앞에 붙는다. 디폴트 메소드는 public 특성을 갖으며 생략이 가능하다.

> ...(중략)... 바로 "하위 호환성"때문이다. 예를 들어 설명하자면, 여러분들이 만약 오픈 소스코드를 만들었다고 가정하자. 그 오픈소스가 엄청 유명해져서 전 세계 사람들이 다 사용하고 있는데, 인터페이스에 새로운 메소드를 만들어야 하는 상황이 발생했다. 자칫 잘못하면 내가 만든 오픈소스를 사용한 사람들은 전부 오류가 발생하고 수정을 해야 하는 일이 발생할 수도 있다. 이럴 때 사용하는 것이 바로 default 메소드다. (자바의 신 2권)
> 

인터페이스를 보완하는 과정에서 추가적으로 구현해야 할, 혹은 필수적으로 존재해야 할 메소드가 있다면, 이미 이 인터페이스를 구현한 클래스와의 호환성이 떨어지게 된다.

이러한 경우 default 메소드를 추가하여 하위 호환성은 유지되고 인터페이스의 보완을 지킬 수 있다. 새로 작성된 디폴트 메소드는 implements 한 클래스에서 재정의가 가능하다.

**static 메소드**

자바 8에서 추가되었다. 디폴트 메소드와는 달리 객체가 없어도 인터페이스만으로 호출이 가능하며, 상속이 불가능하다는 특징이 있다.

****private 메소드****

자바 9에서 추가되었다.

> 자바 8의 default method와 static method는 여전히 불편하게 만든다. 단지 특정 기능을 처리하는 내부 method일 뿐인데도, 외부에 공개되는 public method로 만들어야 하기 때문이다. interface를 구현하는 다른 interface 혹은 class가 해당 method에 액세스 하거나 상속할 수 있는 것을 원하지 않아도, 그렇게 될 수 있는 것이다.
자바 9에서는 위와 같은 사항으로 인해 private method와 private static method라는 새로운 기능을 제공해준다. 따라서 코드의 중복을 피하고 interface에 대한 캡슐화를 유지할 수 있게 되었다.
> 

## 인터페이스와 추상 클래스의 차이점

인터페이스와 추상 클래스의 공통점은 추상 메소드를 사용할 수 있다는 점이다. 더해서 자바 8부터는 default 메소드를 사용할 수 있다.

그럼 왜 굳이 2가지로 나눠서 사용할까?

### 다중상속 여부

- 인터페이스를 구현하는 클래스는 다른 여러개 인터페이스를 함께 구현할 수 있다.
- 추상 클래스는 다중상속을 지원하지 않기 때문에 여러 추상 클래스를 상속할 수 없다.

### 상태 유무

- 추상 클래스는 상태(멤버 변수, 일반 메소드, 생성자)를 가질 수 있다.
- 그러나 인터페이스는 추상 클래스와 반대로 상태를 가질 수 없다.

### 사용 의도

다중 상속 여부의 차이도 있지만 사실 가장 중요한 부분은 사용 의도이다.

- 추상 클래스
    - `is-a` (~이다) 관계가 성립될 때 사용한다.
        - 강아지는 동물이다.
        - 고양이는 동물이다.
    - 추상 클래스는 상속할 각 클래스의 공통점을 찾아 추상화시켜 놓은 것으로, 상속 관계를 타고 올라갔을 때, 같은 부모 클래스를 상속하며, 부모 클래스가 가진 기능들을 구현해야할 경우 사용한다.
    - 따라서, 부모 클래스와 자식 클래스 간의 강한 결합이 생긴다.
    
- 인터페이스
    - `has-a` (~를 할 수 있는) 관계가 성립될 때 사용한다.
        - 독수리는 날 수 있다.
        - 참새는 날 수 있다.
    - 인터페이스는 상속 관계를 타고 올라갔을 때, 다른 부모 클래스를 상속하더라도 같은 기능(동작)이 필요할 경우 사용한다.

### 예제

![image](https://user-images.githubusercontent.com/55661631/161039126-10cd5f99-42c2-46a4-9138-986649ee839e.png)

- 최상위 클래스인 Creature는 추상 클래스이다.
- Human과 Animal은 추상 클래스이며, Creature를 상속하고 있다.
- Kevin과 Turtle은 Swimable 인터페이스를 구현하고 있다.
- 3개 중 2개의 클래스가 Swimable 인터페이스를 구현하는데, swimable 인터페이스의 swimDown() 메소드를 Creature 또는 Human 추상 클래스에 작성해도 되지 않을까?
- 사람이나 생물은 수영을 못할 수도 있기 때문에 `is-a` 관계가 성립하지 않아 나중에 문제가 발생할 수 있다.

### 적절한 사용 케이스

- 추상 클래스
    - `is-a` 관계가 뚜렷하고, 향후 변화가 거의 없다고 판단될 때
- 인터페이스
    - 연관 관계가 불명확하거나 `has-a` 관계가 뚜렷할 때

## **추상 클래스가 다중상속이 안되는 이유**

### 다이아몬드 문제(Diamond Problem)

![image](https://user-images.githubusercontent.com/55661631/161039169-c10b9ab4-9618-4575-9d35-7be20dadd24a.png)

다음과 같은 구조에서 다중상속을 허용한다고 가정해보자.

Father, Mother 클래스는 Parent 클래스의 추상 메소드 `funcA()`를 각각 구현한다. Child 클래스가 Father, Mother 클래스를 둘 다 extends 한다면, Child 클래스의 `funcA()`는 어떤 메소드를 상속받아야 할지 알 수 없다. 따라서 **다중상속의 모호성**으로 이를 금지한다.

### 인터페이스를 사용한 다중상속

추상 클래스의 상속과는 반대로 인터페이스는 여러 개를 implements 할 수 있다. 인터페이스는 선언만 해두기 때문에 자식 클래스에서 메소드를 오버라이드함으로써 에러가 발생하지 않는다.

그러나 위에서 말한 것처럼 Java 8부터 인터페이스에 Default Method가 등장하여 다중 상속의 문제점이 발생할 수도 있다.  따라서 Default Method로 구현된 메소드를 가진 여러 개의 인터페이스를 implements 하면 **자식 클래스에서 반드시 해당 메소드를 오버라이드해야 한다.**

## 예상 면접 질문 및 답변

### Q. 추상 클래스란?

추상 클래스는 객체의 명세의 역할을 하며, 실체 클래스의 공통적인 상태를 모아 규격을 잡아 놓은 추상적인 클래스다.

### Q. 인터페이스란?

인터페이스는 구현된 것은 아무 것도 없고, 밑그림만 그려져 있는 객체의 명세 혹은 설계도라고 표현할 수 있다.

### Q. 추상 클래스와 인터페이스의 차이는?

- 다중상속의 유무
    - 추상 클래스는 다중상속이 불가능하고 인터페이스는 다중상속이 가능하다
- 상태의 유무
    - 추상 클래스는 멤버 변수, 일반 메소드, 생성자 등 상태를 가질 수 있다. 그러나 인터페이스는 상태를 가질 수 없다.
- 사용 의도
    - 추상 클래스는 `is-a` 관계가 성립할 때 사용하고, 인터페이스는 `has-a` 관계가 성립할 때 사용한다.

### Q. 추상 클래스가 다중상속이 안되는 이유는?

추상 클래스를 다중상속하면 다이아몬드 문제가 발생하기 때문이다. 예를 들어 Father, Mother 클래스가 Parent 클래스의 추상 메소드 `funcA()`를 구현하고 Child 클래스가 Father, Mother 클래스를 상속한다면, Child 클래스의 `funcA()`는 어떤 메소드를 상속 받아야 할지 알 수 없다.

### Q. 인터페이스의 변화 (Java 8, Java 11)

Java 8에서 하위 호환성을 위한 default method와 static method가 추가되었고, Java 9에서는 인터페이스의 캡슐화를 위한 private method가 추가되었다. 

## 참고

- [https://devlog-wjdrbs96.tistory.com/370](https://devlog-wjdrbs96.tistory.com/370)
- [https://zangzangs.tistory.com/44](https://zangzangs.tistory.com/44)
- [https://velog.io/@new_wisdom/Java-추상-클래스와-인터페이스의-차이](https://velog.io/@new_wisdom/Java-%EC%B6%94%EC%83%81-%ED%81%B4%EB%9E%98%EC%8A%A4%EC%99%80-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4%EC%9D%98-%EC%B0%A8%EC%9D%B4)
- [https://myjamong.tistory.com/150](https://myjamong.tistory.com/150)
- [https://youngjinmo.github.io/2021/03/diamond-problem/](https://youngjinmo.github.io/2021/03/diamond-problem/)
- [https://deveun.tistory.com/entry/Java-자바에서의-다중상속과-인터페이스의-Default-Method](https://deveun.tistory.com/entry/Java-%EC%9E%90%EB%B0%94%EC%97%90%EC%84%9C%EC%9D%98-%EB%8B%A4%EC%A4%91%EC%83%81%EC%86%8D%EA%B3%BC-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4%EC%9D%98-Default-Method)
